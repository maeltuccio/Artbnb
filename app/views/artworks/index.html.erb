
<h1>Liste des œuvres d'art</h1>
<% if user_signed_in? %>
  <%= link_to 'Nouvelle œuvre', new_artwork_path, class: "btn btn-primary" %>
<% end %>
<ul>
  <% @artworks.each do |artwork| %>
    <li>
      <% if artwork.image.attached? %>
        <!-- Image locale via Active Storage -->
        <%= image_tag artwork.image.variant(resize_to_limit: [100, 100]), alt: "Image de #{artwork.title}", class: "thumbnail" %>
      <% elsif artwork.image.present? %>
        <!-- Image distante via image_url -->
        <%= image_tag artwork.image, alt: "Image de #{artwork.title}", class: "thumbnail" %>
      <% else %>
        <!-- Si aucune image n'est disponible -->
        <p>Aucune image disponible</p>
      <% end %>
      <!-- Lien vers la page de détails de l'œuvre -->
      <%= link_to artwork.title, artwork_path(artwork) %>
<%= number_to_currency(artwork.price) %>
    </li>
  <% end %>
  <div class="grid">
    <% @artworks.each do |artwork| %>
      <div class="card">
        <% if artwork.image.attached? %>
          <%= image_tag artwork.image.variant(resize_to_limit: [300, 200]), class: "card-image", alt: "Image de #{artwork.title}" %>
        <% else %>
          <div class="card-image-placeholder">Aucune image disponible</div>
        <% end %>
        <div class="card-content">
          <h3 class="card-title"><%= artwork.title %></h3>
          <p class="card-description"><%= truncate(artwork.description, length: 100) %></p>
          <p class="card-price"><%= number_to_currency(artwork.price) %></p>
          <%= link_to 'Voir plus', artwork_path(artwork), class: "btn btn-secondary" %>
        </div>
      </div>
    <% end %>
  </div>
</div>
